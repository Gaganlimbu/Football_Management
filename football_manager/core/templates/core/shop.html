{% extends 'core/base.html' %}

{% block content %}
<div class="container mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold text-center mb-6">Discover Amazing Products</h1>
  <p class="text-center text-gray-600 mb-8">
    Shop the latest collection of premium products at unbeatable prices.
  </p>

  <!-- Search Bar -->
  <form method="get" class="mb-6 flex justify-center">
    <input
      type="text"
      name="q"
      placeholder="Search for products..."
      value="{{ request.GET.q }}"
      class="w-1/2 px-4 py-2 border border-gray-300 rounded-l"
    />
    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-r">
      Search
    </button>
  </form>

  <!-- Category Filters -->
  <div class="flex justify-center space-x-4 mb-8">
    {% for key, label in categories %}
      <a href="?category={{ key }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}" 
         class="px-4 py-2 rounded border border-gray-300 hover:bg-gray-200 {% if category == key %}bg-gray-300{% endif %}">
        {{ label }}
      </a>
    {% endfor %}
  </div>

  <!-- Product List -->
  {% if products %}
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      {% for product in products %}
        <div class="border rounded-lg shadow p-4">
          <img src="{{ product.image.url }}" alt="{{ product.name }}" class="w-full h-48 object-cover rounded mb-4">
          <h2 class="text-lg font-semibold">{{ product.name }}</h2>
          <p class="text-gray-600">{{ product.description|truncatewords:15 }}</p>
          <p class="mt-2 font-bold text-blue-600">${{ product.price }}</p>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-center text-gray-500 mt-8">
      No products found{% if request.GET.q %} for "{{ request.GET.q }}"{% endif %}.
    </p>
  {% endif %}
</div>
{% endblock %}
